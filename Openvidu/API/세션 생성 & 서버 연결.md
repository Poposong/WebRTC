
# Openvidu API
### [ì„¸ì…˜ì„ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ê³¼ì •]

<br>


## 1. ì„¸ì…˜ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤

### 1-1) SessionProperties í´ë˜ìŠ¤
: OpenVidu Java Client ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì‚¬ìš©ë˜ëŠ” í´ë˜ìŠ¤ë¡œì„œ, ì„¸ì…˜ ìƒì„± ì‹œì— ì„¸ì…˜ì˜ ì†ì„±ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

- ë‹¤ì–‘í•œ ì„¤ì •ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
	Ex) ì„¸ì…˜ ì´ë¦„, ì„¸ì…˜ì˜ ë…¹í™” ì—¬ë¶€, ì„¸ì…˜ì˜ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì—¬ë¶€

- Code
``` java
// Create a new session with properties
SessionProperties properties = new SessionProperties.Builder()
        .name("MySession") // Set session name
        .recording(true)  // Enable recording for the session
        .broadcast(true)  // Enable broadcasting for the session
        .build();

// Create the session with the specified properties
Session session = openVidu.createSession(properties);
```
1. SessionProperties.Builder()ë¥¼ ì‚¬ìš©í•˜ì—¬ SessionProperties ê°ì²´ë¥¼ ë§Œë“¤ê³ , ê°ê°ì˜ ì†ì„±ì„ ì„¤ì •í•œ í›„ build() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ìµœì¢… SessionProperties ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
2. ì´ë ‡ê²Œ ìƒì„±ëœ SessionProperties ê°ì²´ëŠ” openVidu.createSession() ë©”ì„œë“œì— ì „ë‹¬í•˜ì—¬ ì„¸ì…˜ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©í•œë‹¤.

	- createSession(properties) ë©”ì†Œë“œ
    	
        - ì„¸ì…˜ì˜ ì˜µì…˜ìœ¼ë¡œ ì„¸ì…˜ì„ ìƒì„±í•˜ê³  ì €ì¥í•œë‹¤.
        
<br>

### 1-2) ConnectionProperties í´ë˜ìŠ¤
: OpenVidu APIë¥¼ ì‚¬ìš©í•˜ì—¬ WebRTC ê¸°ë°˜ì˜ ì˜ìƒ í†µí™”ë‚˜ ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°ê³¼ ê°™ì€ ì—°ê²°ì„ ì„¤ì •í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ì˜µì…˜ë“¤ì„ ì„¤ì •í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ì´ë‹¤.
âœ” ì´ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—°ê²°ì„ ìƒì„±í•  ë•Œ ì›í•˜ëŠ” ì„¤ì •ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```java
import io.openvidu.java.client.ConnectionProperties;
import io.openvidu.java.client.Connection;
import io.openvidu.java.client.Session;

// OpenVidu ê°ì²´ê°€ ìƒì„±ë˜ì—ˆë‹¤ê³  ê°€ì •
OpenVidu openVidu = new OpenVidu("https://your-openvidu-server");

// ìƒˆë¡œìš´ ì„¸ì…˜ ìƒì„±
Session session = openVidu.createSession();

// ConnectionProperties ìƒì„±
ConnectionProperties connectionProperties = new ConnectionProperties.Builder()
    .type(ConnectionType.WEBRTC) // ì—°ê²° íƒ€ì… ì„¤ì • (WebRTCë¡œ ì§€ì •)
    .data("Some custom data")    // ì‚¬ìš©ì ì •ì˜ ë°ì´í„° ì„¤ì • (ì„ íƒ ì‚¬í•­)
    .build();

// Connection ìƒì„±
Connection connection = session.createConnection(connectionProperties);
```
- ConnectionProperties í´ë˜ìŠ¤ì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ì˜µì…˜
	
    - **`type`**: ì—°ê²°ì˜ íƒ€ì…ì„ ì„¤ì •í•œë‹¤.. ì£¼ë¡œ WebRTC ì—°ê²°ì„ ì‚¬ìš©í•˜ë¯€ë¡œ **ConnectionType.WEBRTC** ë¡œ ì„¤ì •í•¨
	
    - **`data`**: ì‚¬ìš©ì ì •ì˜ ë°ì´í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í™œìš©í•˜ì—¬ ì—°ê²°ëœ ì‚¬ìš©ìì— ëŒ€í•œ ì¶”ê°€ ì •ë³´ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
	
    - **`role`** : ì—°ê²°ì˜ ì—­í• ì„ ì§€ì •í•œë‹¤. ì£¼ë¡œ **publisher**ì™€ **subscriber** ì—­í• ì´ ì‚¬ìš©í•¨. 
    âœ” **publisher**ëŠ” ë¯¸ë””ì–´ë¥¼ ì†¡ì¶œí•˜ëŠ” ì—­í• ì´ê³ , **subscriber** ëŠ” ë¯¸ë””ì–´ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ì—­í• ì´ë‹¤.
	
    - **`kurentoOptions`**: Kurento ì„œë²„ì— ì „ë‹¬í•  ì¶”ê°€ ì˜µì…˜ì„ ì„¤ì •í•©ë‹ˆë‹¤. KurentoëŠ” OpenVidu ì„œë²„ì˜ ë’·ë‹¨ì—ì„œ WebRTC ì—°ê²°ì„ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë¯¸ë””ì–´ ì„œë²„ì…ë‹ˆë‹¤.
<br>
<br>
<br>

## 2. ì„¸ì…˜ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œ

### 2-1) createSession(properties)

: ì„¸ì…˜ì˜ ì˜µì…˜ìœ¼ë¡œ ì„¸ì…˜ì„ ìƒì„±í•˜ê³  ì €ì¥í•œë‹¤.

```java
Session session = openVidu.createSession(properties);
```

<br>

### 2-2) getActiveSession()
: OpenVidu í´ë˜ìŠ¤ì—ì„œ ì •ì˜ëœ ë©”ì„œë“œë¡œ ì£¼ì–´ì§„ ì„¸ì…˜ IDì— í•´ë‹¹í•˜ëŠ” í™œì„±í™”ëœ(í˜„ì¬ ì‚¬ìš© ì¤‘ì¸) ì„¸ì…˜ì„ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
```java
public Session getActiveSession(String sessionId)
```
- ì£¼ì–´ì§„ 'sessionId'ì— í•´ë‹¹í•˜ëŠ” ì„¸ì…˜ì„ 'activeSessions' ë§µì—ì„œ ì°¾ì•„ì„œ ë°˜í™˜í•œë‹¤.
- 'activeSessions' ë§µì€ Openvidu í´ë˜ìŠ¤ì˜ ë©¤ë²„ ë³€ìˆ˜ë¡œ ì„ ì–¸ë˜ì–´ ìˆìœ¼ë©°, í™œì„±í™”ëœ ì„¸ì…˜ë“¤ì„ ì €ì¥í•˜ëŠ” ConcurrentHashMapì´ë‹¤.
- ConcurrentHashMapì€ ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ ë™ì‹œì— ì ‘ê·¼ì´ ê°€ëŠ¥í•œ ë™ì‹œì„± ë§µ ìë£Œêµ¬ì¡°ì´ë‹¤.

ğŸ“Œ getActiveSession ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ íŠ¹ì • ì„¸ì…˜ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìœ¼ë©°, í•´ë‹¹ ì„¸ì…˜ì€ OpenVidu í´ë˜ìŠ¤ì—ì„œ ê´€ë¦¬ë˜ê³  ìˆëŠ” í™œì„±í™”ëœ ì„¸ì…˜ë“¤ ì¤‘ í•˜ë‚˜ì¼ ê²ƒì´ë‹¤.
ğŸ“Œ ì„¸ì…˜ ê°ì²´ì—ëŠ” í•´ë‹¹ ì„¸ì…˜ì˜ ì •ë³´ì™€ ì†ì„±ë“¤ì´ ë‹´ê²¨ìˆìœ¼ë©°, í•„ìš”ì— ë”°ë¼ ì„¸ì…˜ ê°ì²´ì˜ ë©”ì„œë“œë“¤ì„ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ì„ ê´€ë¦¬í•˜ê±°ë‚˜ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<br>
<br>
<br>

## 3. ì „ì²´ì ì¸ ê³¼ì • ì„¤ëª…
1. SessionPropertiesí´ë˜ìŠ¤ë¥¼ í™œìš©í•´ requestBodyë¡œ ë°›ì•„ì˜¨ Json í˜•ì‹ ë°ì´í„°ë¥¼ ì—­ì§ë ¬í™”í•´ì„œ ê°ì²´ë¡œ ë„£ì–´ì¤€ë‹¤.

2. session.createSession(properties) ë¡œ ConcurrentHashMap í˜•íƒœì˜ ë©¤ë²„ë³€ìˆ˜ë¡œ ì„ ì–¸ë˜ì–´ìˆëŠ” activeSessionsì— ìƒˆë¡œìš´ ì„¸ì…˜ì„ ë„£ì–´ì¤€ë‹¤.	
(key-value â¡ sessionId-session)

3. session.ActiveSession(sessionId) ë¡œ sessionIdì— ë§ëŠ” ì„¸ì…˜ì„ ì°¾ëŠ”ë‹¤. (ì—†ìœ¼ë©´ null ë°˜í™˜)

4. ConnectionPropertiesë¡œ ì—°ê²°ì— í•„ìš”í•œ ì†ì„±ì„ ì„¸íŒ…í•¨.

5. Connectionìœ¼ë¡œ session.createConnection(properties)ì„ í•¨ìœ¼ë¡œì¨ ì„¸ì…˜ì„ ì—°ê²°í•¨
